<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <!--displays the buttons for the user to push-->
    <div id="buttons">
        <h1>Select your move!</h1>
        <button id="rockButton">Rock</button>
        <button id="paperButton">Paper</button>
        <button id="scissorsButton">Scissors</button>
    </div>
    <!--displays the results of each round and the game as a whole-->
    <div id="results">
        <h3>Results:</h3>
        <div id="rounds">
            <ol id="roundList">

            </ol>
        </div>
        <div id="game">
            <h3 id="gameResult"></h5>
        </div>
    </div>
    
    <script>
        //sets both scores at 0 to start
        let playerScore = 0;
        let computerScore = 0;
        
        //links HTML buttons to script and adds an event listener that starts a round (startRound()).
        //startRound takes the player's choice, the player's score, and the computer's score as parameters.
        //the result of startRound is assigned to roundResult; console.log(roundResult) shows the process up to here occurs correctly.
        const rockButton = document.getElementById('rockButton');
        const paperButton = document.getElementById('paperButton');
        const scissorsButton = document.getElementById('scissorsButton');

        rockButton.addEventListener('click', function(event) {
            if (checkVictory(playerScore, computerScore)) {
                alert('Game Over');
                return;
            }
            let roundResult = startRound('rock', playerScore, computerScore);
            console.log(roundResult);
            if (roundResult == 'playerWin') {
                playerScore = addScore(playerScore)
            }
            if (roundResult == 'computerWin') {
                computerScore = addScore(computerScore);
            }
            displayRound('rock',roundResult, playerScore, computerScore);
            if (checkVictory(playerScore, computerScore)) {
                console.log('Game over!');
                endGame(playerScore, computerScore);
            }
            console.log(checkVictory(),playerScore,computerScore);
        });
        paperButton.addEventListener('click', function(event) {
            if (checkVictory(playerScore, computerScore)) {
                alert('Game Over');
                return;
            }
            let roundResult = startRound('paper', playerScore, computerScore);
            console.log(roundResult);
            if (roundResult == 'playerWin') {
                playerScore = addScore(playerScore)
            }
            if (roundResult == 'computerWin') {
                computerScore = addScore(computerScore);
            }
            displayRound('paper',roundResult, playerScore, computerScore);
            if (checkVictory(playerScore, computerScore)) {
                console.log('Game over!');
                endGame(playerScore, computerScore);
            }
            console.log(checkVictory(),playerScore,computerScore);
        });
        scissorsButton.addEventListener('click', function(event) {
            if (checkVictory(playerScore, computerScore)) {
                alert('Game Over');
                return;
            }
            let roundResult = startRound('scissors', playerScore, computerScore);
            console.log(roundResult);
            if (roundResult == 'playerWin') {
                playerScore = addScore(playerScore)
            }
            if (roundResult == 'computerWin') {
                computerScore = addScore(computerScore);
            }
            displayRound('scissors',roundResult, playerScore, computerScore);
            if (checkVictory(playerScore, computerScore)) {
                console.log('Game over!');
                endGame(playerScore, computerScore);
            }
            console.log(checkVictory(),playerScore,computerScore);
        });



        //startRound() first checks if the victory conditions have been met, and halts the game if they have.
        //startRound() then makes the computer select its move.
        //startRound() then calls playRound() with playerSelection and computerSelection and assigns the result to roundWinner.
        //roundWinner is returned to roundResult in the event listener above.
        //the victory condition is checked again at the end; this will eventually cause the final results to be displayed.
        function startRound(playerSelection, playerScore, computerScore) {
            computerSelection = computerPlay();
            let roundWinner = playRound(playerSelection, computerSelection, playerScore, computerScore);
            //console.log(roundResult);
            return roundWinner;
        }



        function computerPlay() {
            let moveNum = Math.floor(Math.random()*3);
            if (moveNum == 0) {
                return "rock";
            }
            else if (moveNum == 1) {
                return "paper";
            }
            else {
                return "scissors";
            }
        }
        
        //this function appears to work correctly.
        //the game will not proceed if you manually set either score to 5 or higher.
        function checkVictory(playerScore, computerScore) {
            if (playerScore >= 5 | computerScore >= 5) {
                return true;
            }
        }
        
        //this function compares playerSelection and computerSelection and determines the winner.
        //playRound appears to work correctly, based on the console.log() results here and the console.log() results from above in startRound() and the event listeners for the buttons.

        function playRound(playerSelection, computerSelection, playerScore, computerScore) {
            if (playerSelection == "rock" && computerSelection == "paper") {
                //console.log('rockpaper');
                //displayRound(playerSelection, computerSelection, 'computerWin', playerScore, computerScore);
                return "computerWin";
            }
            else if (playerSelection == "rock" && computerSelection == "scissors") {
                //console.log('rockscissors');
                //displayRound(playerSelection, computerSelection, 'playerWin', playerScore, computerScore);
                return "playerWin";
            }
            else if (playerSelection == "paper" && computerSelection == "rock") {
                //console.log('paperrock');
                //displayRound(playerSelection, computerSelection, 'playerWin', playerScore, computerScore);
                return "playerWin";
            }
            else if (playerSelection == "paper" && computerSelection == "scissors") {
                //console.log('paperscissors');
                //displayRound(playerSelection, computerSelection, 'computerWin', playerScore, computerScore);
                return "computerWin";
            }
            else if (playerSelection == "scissors" && computerSelection == "rock") {
                //console.log('scissorsrock');
                //displayRound(playerSelection, computerSelection, 'computerWin', playerScore, computerScore);
                return "computerWin";
            }
            else if (playerSelection == "scissors" && computerSelection == "paper") {
                //console.log('scissorspaper');
                //displayRound(playerSelection, computerSelection, 'playerWin', playerScore, computerScore);
                return "playerWin";
            }
            else {
                //console.log('tie');
                //displayRound(playerSelection, computerSelection, 'tie', playerScore, computerScore);
                return "tie";
            }
        }
        

        function displayRound(playerMove,roundResult, playerScore, computerScore) {
            let displayWinner;
            let displayScore;
            let computerMove;
            const roundList = document.getElementById('roundList');
            const li = document.createElement('li');
            if (playerMove == 'rock') {
                if (roundResult == 'playerWin') {
                    computerMove = 'scissors';
                    displayWinner = 'You won the round!';
                }
                if (roundResult == 'computerWin') {
                    computerMove = 'paper'
                    displayWinner = 'The computer won the round!';
                }
                if (roundResult == 'tie') {
                    computerMove = 'rock';
                    displayWinner = 'The round is a tie.';
                }
            }
            else if (playerMove == 'paper') {
                if (roundResult == 'playerWin') {
                    computerMove = 'rock';
                    displayWinner = 'You won the round!';
                }
                if (roundResult == 'computerWin') {
                    computerMove = 'scissors';
                    displayWinner = 'The computer won the round!';
                }
                if (roundResult == 'tie') {
                    computerMove = 'paper';
                    displayWinner = 'The round is a tie.';
                }
            }
            if (playerMove == 'scissors') {
                if (roundResult == 'playerWin') {
                    computerMove = 'paper';
                    displayWinner = 'You won the round!';
                }
                if (roundResult == 'computerWin') {
                    computerMove = 'rock';
                    displayWinner = 'The computer won the round!';
                }
                if (roundResult == 'tie') {
                    computerMove = 'scissors';
                    displayWinner = 'The round is a tie.';
                }
            }
            if (playerScore > computerScore) {
                displayScore = "You're in the lead, " + playerScore + " to " + computerScore + ".";
            }
            if (computerScore > playerScore) {
                displayScore = "The computer is in the lead, " + computerScore + " to " + playerScore + ".";
            }
            if (playerScore == computerScore) {
                displayScore = "The game is tied, " + playerScore + " to " + computerScore + ".";
            }
            li.innerText = 'You played ' + playerMove + ' and the computer played ' + computerMove + '. ' + displayWinner + " " + displayScore;
            roundList.appendChild(li);
        }

        function addScore(score) {
            score++;
            return score;
        }
        
        function endGame(playerScore, computerScore) {
            const gameResult = document.getElementById('gameResult');
            console.log(gameResult, playerScore, computerScore);
            if (playerScore > computerScore) {
                gameResult.textContent = "You won the game, " + playerScore + " to " + computerScore + "!";
            }
            if (playerScore < computerScore) {
                gameResult.textContent = "You lost the game, " + computerScore + " to " + playerScore + "!";
            }
        }
    </script>
</body>


</html>



